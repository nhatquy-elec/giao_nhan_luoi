<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Tách chuỗi & Tìm kiếm gần đúng</title>
  <style>
    body { font-family: Arial; padding: 20px; max-width: 700px; margin:auto; }
    textarea, input { width: 100%; padding: 8px; margin-top: 10px; }
    button { margin-top: 10px; padding: 8px 16px; font-size: 16px; }
    #result, #searchResult { margin-top: 20px; font-weight: bold; white-space: pre-wrap; }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
</head>
<body>

  <h2>Nhập chuỗi văn bản:</h2>
  <textarea id="inputText" placeholder="Dán chuỗi văn bản vào đây..."></textarea>
  <button onclick="tachChuoi()">Tách chuỗi tại dấu :</button>

  <div id="result"></div>

  <h3>Tìm kiếm gần đúng:</h3>
  <input type="text" id="searchText" placeholder="Nhập từ cần tìm...">
  <button onclick="timKiemGanDung()">Tìm kiếm</button>

  <div id="searchResult"></div>

  <script>
    function tachChuoi() {
      const input = document.getElementById("inputText").value;
      const index = input.indexOf(":");
      let output = "";

      if (index !== -1) {
        const phan1 = input.slice(0, index).trim();
        const phan2 = input.slice(index + 1).trim();
        output = `Phần 1: "${phan1}"\nPhần 2: "${phan2}"`;
      } else {
        output = `Giữ nguyên: "${input.trim()}"`;
      }

      document.getElementById("result").textContent = output;
    }

    function timKiemGanDung() {
      const inputText = document.getElementById("inputText").value;
      const searchText = document.getElementById("searchText").value;

      if (!searchText || !inputText) {
        document.getElementById("searchResult").textContent = "Vui lòng nhập cả văn bản và từ cần tìm.";
        return;
      }

      const data = inputText.split(/\s+/).map(word => ({ word }));
      const options = {
        includeScore: true,
        keys: ['word'],
        threshold: 0.4  // mức độ gần đúng (0 = chính xác, 1 = rất mờ)
      };
      const fuse = new Fuse(data, options);
      const result = fuse.search(searchText);

      if (result.length > 0) {
        const suggestions = result.map(r => r.item.word).join(", ");
        document.getElementById("searchResult").textContent = `Kết quả gần đúng: ${suggestions}`;
      } else {
        document.getElementById("searchResult").textContent = "Không tìm thấy từ nào gần đúng.";
      }
    }
  </script>

</body>
</html>
